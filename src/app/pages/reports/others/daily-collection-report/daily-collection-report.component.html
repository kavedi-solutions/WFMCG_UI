<page-header
  class="bg-blue-600"
  [title]="PageTitle"
  [showBack]="false"
  [showAdd]="false"
></page-header>

<form class="form-field-full page-detail" [formGroup]="collectionForm">
  <mat-card>
    <div
      class="matero-row"
      fxLayout.lt-sm="column"
      fxLayout="row"
      fxLayoutGap="20px"
      fxLayoutGap.xs="5px"
    >
      <div fxFlex="20%" fxFlex.lt-sm="100" class="matero-col">
        <mat-form-field appearance="legacy" color="primary">
          <mat-label>Book Type</mat-label>
          <mat-select
            formControlName="TransactionTypeID"
            (valueChange)="TransactionTypeSelectionChange($event)"
          >
            <mat-option
              *ngFor="let ttdd of transactionTypeDropDown"
              [value]="ttdd.transactionTypeID"
            >
              {{ ttdd.transactionTypeName }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="TransactionTypeIDControlRequired"
            >Book Type is required.</mat-error
          >
        </mat-form-field>
      </div>
      <div fxFlex="15%" fxFlex.lt-sm="100" class="matero-col">
        <mat-form-field appearance="legacy" color="primary">
          <input
            matInput
            [matDatepicker]="FromDatePicker"
            placeholder="From Date"
            formControlName="FromDate"
            [min]="FromMinDate"
            [max]="FromMaxDate"
            (dateChange)="FromDateChange()"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="FromDatePicker"
            [tabIndex]="-1"
            ><mat-icon matDatepickerToggleIcon
              >keyboard_arrow_down</mat-icon
            ></mat-datepicker-toggle
          >
          <mat-datepicker #FromDatePicker></mat-datepicker>
        </mat-form-field>
      </div>
      <div fxFlex="15%" fxFlex.lt-sm="100" class="matero-col">
        <mat-form-field appearance="legacy" color="primary">
          <input
            matInput
            [matDatepicker]="ToDatePicker"
            placeholder="To Date"
            formControlName="ToDate"
            [min]="ToMinDate"
            [max]="ToMaxDate"
            (dateChange)="ToDateChange()"
          />
          <mat-datepicker-toggle matSuffix [for]="ToDatePicker" [tabIndex]="-1"
            ><mat-icon matDatepickerToggleIcon
              >keyboard_arrow_down</mat-icon
            ></mat-datepicker-toggle
          >
          <mat-datepicker #ToDatePicker></mat-datepicker>
        </mat-form-field>
      </div>
      <div fxFlex="15%" fxFlex.lt-sm="100" class="matero-col">
        <mat-form-field appearance="legacy" color="primary">
          <mat-label>Return Type</mat-label>
          <mat-select
            formControlName="ReturnTypeID"
            [disabled]="ShowReturnType"
          >
            <mat-option
              *ngFor="let sbdd of returnTypeDropDown"
              [value]="sbdd.returnTypeID"
            >
              {{ sbdd.returnTypeName }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div fxFlex="20%" fxFlex.lt-sm="100" class="matero-col m-t-12">
        <mat-radio-group
          aria-label="Select an option"
          formControlName="ReportType"
        >
          <mat-radio-button value="S">Summary</mat-radio-button>
          <mat-radio-button value="D">Details</mat-radio-button>
        </mat-radio-group>
      </div>
    </div>
    <div
      class="matero-row"
      fxLayout.lt-sm="column"
      fxLayout="row"
      fxLayoutGap="20px"
      fxLayoutGap.xs="5px"
    >
      <div fxFlex="40%" fxFlex.lt-sm="100" class="matero-col"></div>
      <div fxFlex="60%" fxFlex.lt-sm="100" class="matero-col">
        <mat-form-field appearance="legacy" color="primary">
          <mat-label>Search Account</mat-label>
          <input
            matInput
            type="text"
            formControlName="AccountName"
            placeholder="Search Account"
            maxlength="100"
            (keyup)="onAccountNameKeyUp($event)"
          />
        </mat-form-field>
      </div>
    </div>
    <div
      class="matero-row"
      fxLayout.lt-sm="column"
      fxLayout="row"
      fxLayoutGap="20px"
      fxLayoutGap.xs="5px"
    >
      <div fxFlex="40%" fxFlex.lt-sm="100" class="matero-col">
        <mtx-grid
          class="table-main-wrapper mtx-grid-purchase"
          [data]="booksDropDown"
          [columns]="columns"
          [multiSelectable]="true"
          [rowSelectable]="true"
          [hideRowSelectionCheckbox]="false"
          [pageOnFront]="false"
          [showPaginator]="false"
          [showToolbar]="false"
          [showSummary]="false"
          [showColumnMenuButton]="false"
          (rowSelectionChange)="bookrowSelectionChange($event)"
        >
        </mtx-grid>
      </div>
      <div fxFlex="60%" fxFlex.lt-sm="100" class="matero-col">
        <mtx-grid
          class="table-main-wrapper mtx-grid-purchase"
          [data]="filteraccountsData"
          [columns]="columns"
          [multiSelectable]="true"
          [rowSelectable]="true"
          [rowSelected]="selectedeAccountsData"
          [hideRowSelectionCheckbox]="false"
          [pageOnFront]="false"
          [showPaginator]="false"
          [showToolbar]="false"
          [showSummary]="false"
          [showColumnMenuButton]="false"
          (rowSelectionChange)="accountRowSelectionChange($event)"
        >
        </mtx-grid>
      </div>
    </div>
    {{collectionForm.valid}}
    {{booksselectedAccountsData.length}}
    {{selectedeAccountsData.length}}
    <mat-card-actions align="end" class="area-mat-card-actions m-r-0">
      <button
        type="button"
        mat-raised-button
        color="primary"
        [disabled]="
          !collectionForm.valid ||
          booksselectedAccountsData.length == 0 ||
          selectedeAccountsData.length == 0
        "
        (click)="GenerateReport()"
      >
        Generate (Print)
      </button>
    </mat-card-actions>
  </mat-card>
</form>
